<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>LINDAT/CLARIN Research Infrastructure</title>
    <meta name="viewport" content="width=device-width">
    <meta name="keywords" content="Language Resources, Infrastructure, Research,
          Natural Language Processing, Multimedia, Czech language, Computational
          Linguistics, Speech, Text, Corpus, Corpora" />
    <meta name="description" content="LINDAT CLARIN Research Infrastructure" />
    <!-- inject:css -->
    <!-- css files will be automatically insert here -->
    <!-- endinject -->
    <style>
      body {
        display: flex;
        min-height: 100vh;
        flex-direction: column;
      }
      section {
        flex: 1;
      }
    </style>
  </head>
  <body id="lindat-home">
    <!-- HEADER -->
    <header>
    </header>
    <section class="lindat lindat-container">
      <h1>LINDAT/CLARIN Common Theme</h1>
      <p>
        Select the theme you want...
      </p>
      <p>
        <label for="lang-select">Select Language:</label>
        <select id="lang-select">
          <option value="en">English</option>
          <option value="cs">Czech</option>
        </select>
      </p>
      <p>
        <label for="selector">Select active project:</label>
        <select id="selector">
          <option value="lindat-home">Home</option>
          <option value="lindat-repository">Repository</option>
          <option value="lindat-pmltq">PML-TQ</option>
          <option value="lindat-tools">Any</option>
        </select>
      </p>
    </section>
    <section class="lindat lindat-container">
      <h1>Citation Box</h1>
      <div class="citation-box"
           uri="http://hdl.handle.net/11858/00-097C-0000-0023-1AAF-3"
           oai="https://lindat.mff.cuni.cz/repository/oai"
           rest="https://ufal-point-dev.ms.mff.cuni.cz/dspace5l/rest"
           handle="11858/00-097C-0000-0023-1AAF-3"
           title="Prague Dependency Treebank 3.0">
      </div>
    </section>
    <footer>
    </footer>
    <!-- bower:js -->
    <!-- js bower dependencies will be automatically insert here -->
    <!-- endbower -->
    <!-- inject:js -->
    <!-- js files will be automatically insert here -->
    <!-- endinject-->
    <script>
      (function() {
        function ajax(selector, url) {
          var xmlhttp = new XMLHttpRequest();
          xmlhttp.onreadystatechange = function () {
            if (xmlhttp.readyState == XMLHttpRequest.DONE) {
              if (xmlhttp.status == 200) {
                var html = xmlhttp.responseText;
                html = html.replace(/<script[^>]*>/gi, ' <!-- ');
                html = html.replace(/<\/script>/gi, ' --> ');
                document.querySelector(selector).innerHTML = html;
              } else if (xmlhttp.status == 404) {
                alert('Template not found');
              } else {
                alert('GET: ' + url + '\nReturned: '+xmlhttp.status);
              }
            }
          };
          xmlhttp.open('GET', url, true);
          xmlhttp.send();
        }

        function switchLang(lang) {
          ajax('header', '/' + lang + '/partials/header.html');
          ajax('footer', '/' + lang + '/partials/footer.html');
        }

        function init() {
          var langSelect = document.getElementById('lang-select');
          var selector = document.getElementById('selector');

          langSelect.addEventListener('change', function() {
            localStorage.setItem('lang', this.value);
            switchLang(this.value);
          });

          selector.addEventListener('change', function () {
            localStorage.setItem('project', this.value);
            document.body.setAttribute('id', this.value);
          });

          var lang = localStorage.getItem('lang') || 'en';
          var project = localStorage.getItem('project') || 'lindat-home';

          langSelect.value = lang;
          selector.value = project;

          document.body.setAttribute('id', project);
          switchLang(localStorage.getItem('lang') || 'en');

          // Citation box
          var box = $('.citation-box').lindatCitationBox();
        }

        init();
      }());
    </script>
  </body>
</html>
